---

title: Proxmox (QEMU/KVM/VirtIO)


keywords: fastai
sidebar: home_sidebar

summary: "Recipes for Proxmox Virtual Environment"
description: "Recipes for Proxmox Virtual Environment"
nb_path: "nbs/01_linux_servers_networking/proxmox.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/01_linux_servers_networking/proxmox.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>These commands were tested on a Proxmox 6.3.1 clean install with this hardware:</p>
<ul>
<li>Ryzen 3900X</li>
<li>Zotac RTX3090</li>
<li>MSI B450 Steel Legend</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Setup-Proxmox-on-TTY">Setup Proxmox on TTY<a class="anchor-link" href="#Setup-Proxmox-on-TTY"> </a></h2><ul>
<li>By default, Proxmox 6.3.1 does not detect RTX3090.  You need to explicitly add:</li>
</ul>
<div class="highlight"><pre><span></span><span class="c1">#/usr/share/X11/xorg.conf.d/nvidia.conf</span>

Section <span class="s2">&quot;Device&quot;</span>
    Identifier <span class="s2">&quot;Card0&quot;</span>
    Driver <span class="s2">&quot;fbdev&quot;</span>
    BusID <span class="s2">&quot;your_busid&quot;</span>
EndSection
</pre></div>
<div class="highlight"><pre><span></span><span class="c1"># Check busid</span>
lspci -k <span class="p">|</span> grep VGA     <span class="c1"># looks like ##.##.#</span>
</pre></div>
<p>Then run <code>xinit</code> to launch into Proxmox installer</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Enable-GPU-Passthrough">Enable GPU Passthrough<a class="anchor-link" href="#Enable-GPU-Passthrough"> </a></h2><p>In my testing, I get native performance with passthrough.</p>
<h3 id="Enable-IOMMU-and-interrupt-remapping">Enable IOMMU and interrupt remapping<a class="anchor-link" href="#Enable-IOMMU-and-interrupt-remapping"> </a></h3><div class="highlight"><pre><span></span><span class="c1"># Enable IOMMU</span>
<span class="nb">echo</span> <span class="s1">&#39;GRUB_CMDLINE_LINUX_DEFAULT=&quot;quiet amd_iommu=on iommu=pt video=efifb:off nofb nomodeset video=vesafb:off&quot;&#39;</span> &gt;&gt; /etc/default/grub

<span class="nb">echo</span> <span class="s2">&quot;quiet amd_iommu=on iommu=pt&quot;</span> &gt;&gt; /etc/kernel/cmdline

<span class="nb">echo</span> <span class="s2">&quot;vfio</span>
<span class="s2">vfio_iommu_type1</span>
<span class="s2">vfio_pci</span>
<span class="s2">vfio_virqd&quot;</span> &gt;&gt; /etc/modules

<span class="c1"># Enable interrupt remapping</span>
<span class="nb">echo</span> <span class="s2">&quot;options vfio_iommu_type1 allow_unsafe_interrupts=1&quot;</span> &gt; /etc/modprobe.d/iommu_unsafe_interrupts.conf
<span class="nb">echo</span> <span class="s2">&quot;options kvm ignore_msrs=1&quot;</span> &gt; /etc/modprobe.d/kvm.conf
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Add-device-passthrough-to-VFIO">Add device passthrough to VFIO<a class="anchor-link" href="#Add-device-passthrough-to-VFIO"> </a></h3><div class="highlight"><pre><span></span><span class="nv">VFIO_IDS</span><span class="o">=</span><span class="k">$(</span>
    lspci <span class="p">|</span> grep NVIDIA <span class="p">|</span>  <span class="c1"># Get NVIDIA PCI devices </span>
    cut -c <span class="m">1</span>-7          <span class="p">|</span>  <span class="c1"># Get just the bus number</span>
    xargs -n1 lspci -ns <span class="p">|</span>  <span class="c1"># For each device:</span>
    cut -c <span class="m">15</span>-23        <span class="p">|</span>  <span class="c1">#     get the vendor ID code</span>
    paste -sd <span class="s2">&quot;,&quot;</span>          <span class="c1"># Combine into CSV format</span>
<span class="k">)</span>

<span class="nb">echo</span> <span class="s2">&quot;options vfio-pci ids=</span><span class="nv">$VFIO_IDS</span><span class="s2"> disable_vga=1&quot;</span> &gt;&gt; /etc/modprobe.d/vfio.conf
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Blacklist-GPU-drivers-(so-VM-can-use-them)">Blacklist GPU drivers (so VM can use them)<a class="anchor-link" href="#Blacklist-GPU-drivers-(so-VM-can-use-them)"> </a></h3><div class="highlight"><pre><span></span><span class="nb">echo</span> <span class="s2">&quot;blacklist radeon</span>
<span class="s2">blacklist nouveau</span>
<span class="s2">blacklist nvidia&quot;</span> &gt;&gt; /etc/modprobe.d/blacklist.conf
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Update-Grub-and-reboot">Update Grub and reboot<a class="anchor-link" href="#Update-Grub-and-reboot"> </a></h3><div class="highlight"><pre><span></span>pve-efiboot-tool refresh
update-initramfs -u -k all
update-grub
reboot
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Check-that-everything-is-working">Check that everything is working<a class="anchor-link" href="#Check-that-everything-is-working"> </a></h3><div class="highlight"><pre><span></span>dmesg <span class="p">|</span> grep -e DMAR -e IOMMU - e AMD-Vi
</pre></div>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<details class="description">
      <summary data-open="Hide Code" data-close="Show Code"></summary>
        <summary></summary>
        <div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="p">[</span>    <span class="mf">0.592815</span><span class="p">]</span> <span class="n">pci</span> <span class="mi">0000</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mf">00.2</span><span class="p">:</span> <span class="n">AMD</span><span class="o">-</span><span class="n">Vi</span><span class="p">:</span> <span class="n">IOMMU</span> <span class="n">performance</span> <span class="n">counters</span> <span class="n">supported</span>
<span class="p">[</span>    <span class="mf">0.594154</span><span class="p">]</span> <span class="n">pci</span> <span class="mi">0000</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mf">00.2</span><span class="p">:</span> <span class="n">AMD</span><span class="o">-</span><span class="n">Vi</span><span class="p">:</span> <span class="n">Found</span> <span class="n">IOMMU</span> <span class="n">cap</span> <span class="mh">0x80</span>
<span class="p">[</span>    <span class="mf">0.594155</span><span class="p">]</span> <span class="n">pci</span> <span class="mi">0000</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mf">00.2</span><span class="p">:</span> <span class="n">AMD</span><span class="o">-</span><span class="n">Vi</span><span class="p">:</span> <span class="n">Extended</span> <span class="n">features</span> <span class="p">(</span><span class="mh">0x69a22da13324bcf</span><span class="p">):</span>
<span class="p">[</span>    <span class="mf">0.594156</span><span class="p">]</span> <span class="n">AMD</span><span class="o">-</span><span class="n">Vi</span><span class="p">:</span> <span class="n">Interrupt</span> <span class="n">remapping</span> <span class="n">enabled</span>
<span class="p">[</span>    <span class="mf">0.594157</span><span class="p">]</span> <span class="n">AMD</span><span class="o">-</span><span class="n">Vi</span><span class="p">:</span> <span class="n">Virtual</span> <span class="n">APIC</span> <span class="n">enabled</span>
<span class="p">[</span>    <span class="mf">0.594157</span><span class="p">]</span> <span class="n">AMD</span><span class="o">-</span><span class="n">Vi</span><span class="p">:</span> <span class="n">X2APIC</span> <span class="n">enabled</span>
<span class="p">[</span>    <span class="mf">0.594240</span><span class="p">]</span> <span class="n">AMD</span><span class="o">-</span><span class="n">Vi</span><span class="p">:</span> <span class="n">Lazy</span> <span class="n">IO</span><span class="o">/</span><span class="n">TLB</span> <span class="n">flushing</span> <span class="n">enabled</span>
<span class="p">[</span>    <span class="mf">0.594844</span><span class="p">]</span> <span class="n">perf</span><span class="o">/</span><span class="n">amd_iommu</span><span class="p">:</span> <span class="n">Detected</span> <span class="n">AMD</span> <span class="n">IOMMU</span> <span class="c1">#0 (2 banks, 4 counters/bank).</span>
</pre></div>

    </div>
</div>
</div>

    </details>
</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<div class="highlight"><pre><span></span>dmesg <span class="p">|</span> grep -i vfio
</pre></div>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<details class="description">
      <summary data-open="Hide Code" data-close="Show Code"></summary>
        <summary></summary>
        <div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="p">[</span>    <span class="mf">5.953629</span><span class="p">]</span> <span class="n">VFIO</span> <span class="o">-</span> <span class="n">User</span> <span class="n">Level</span> <span class="n">meta</span><span class="o">-</span><span class="n">driver</span> <span class="n">version</span><span class="p">:</span> <span class="mf">0.3</span>
<span class="p">[</span>    <span class="mf">5.957169</span><span class="p">]</span> <span class="n">vfio</span><span class="o">-</span><span class="n">pci</span> <span class="mi">0000</span><span class="p">:</span><span class="mi">0</span><span class="n">e</span><span class="p">:</span><span class="mf">00.0</span><span class="p">:</span> <span class="n">vgaarb</span><span class="p">:</span> <span class="n">changed</span> <span class="n">VGA</span> <span class="n">decodes</span><span class="p">:</span> <span class="n">olddecodes</span><span class="o">=</span><span class="n">io</span><span class="o">+</span><span class="n">mem</span><span class="p">,</span><span class="n">decodes</span><span class="o">=</span><span class="n">none</span><span class="p">:</span><span class="n">owns</span><span class="o">=</span><span class="n">io</span><span class="o">+</span><span class="n">mem</span>
<span class="p">[</span>    <span class="mf">5.980174</span><span class="p">]</span> <span class="n">vfio_pci</span><span class="p">:</span> <span class="n">add</span> <span class="p">[</span><span class="mi">12</span><span class="n">ed</span><span class="p">:</span><span class="mi">3304</span><span class="p">[</span><span class="n">ffffffff</span><span class="p">:</span><span class="n">ffffffff</span><span class="p">]]</span> <span class="k">class</span> <span class="err">0</span><span class="nc">x000000</span><span class="o">/</span><span class="mi">00000000</span>
<span class="p">[</span>    <span class="mf">6.000165</span><span class="p">]</span> <span class="n">vfio_pci</span><span class="p">:</span> <span class="n">add</span> <span class="p">[</span><span class="mi">12</span><span class="n">ed</span><span class="p">:</span><span class="mi">2</span><span class="n">bfa</span><span class="p">[</span><span class="n">ffffffff</span><span class="p">:</span><span class="n">ffffffff</span><span class="p">]]</span> <span class="k">class</span> <span class="err">0</span><span class="nc">x000000</span><span class="o">/</span><span class="mi">00000000</span>
<span class="p">[</span>   <span class="mf">34.528192</span><span class="p">]</span> <span class="n">vfio</span><span class="o">-</span><span class="n">pci</span> <span class="mi">0000</span><span class="p">:</span><span class="mi">0</span><span class="n">e</span><span class="p">:</span><span class="mf">00.0</span><span class="p">:</span> <span class="n">vfio_ecap_init</span><span class="p">:</span> <span class="n">hiding</span> <span class="n">ecap</span> <span class="mh">0x1f</span><span class="o">@</span><span class="mh">0x260</span>
<span class="p">[</span>   <span class="mf">34.528213</span><span class="p">]</span> <span class="n">vfio</span><span class="o">-</span><span class="n">pci</span> <span class="mi">0000</span><span class="p">:</span><span class="mi">0</span><span class="n">e</span><span class="p">:</span><span class="mf">00.0</span><span class="p">:</span> <span class="n">vfio_ecap_init</span><span class="p">:</span> <span class="n">hiding</span> <span class="n">ecap</span> <span class="mh">0x20</span><span class="o">@</span><span class="mh">0x800</span>
<span class="p">[</span>   <span class="mf">34.528221</span><span class="p">]</span> <span class="n">vfio</span><span class="o">-</span><span class="n">pci</span> <span class="mi">0000</span><span class="p">:</span><span class="mi">0</span><span class="n">e</span><span class="p">:</span><span class="mf">00.0</span><span class="p">:</span> <span class="n">vfio_ecap_init</span><span class="p">:</span> <span class="n">hiding</span> <span class="n">ecap</span> <span class="mh">0x27</span><span class="o">@</span><span class="mh">0xd2f</span>
<span class="p">[</span>   <span class="mf">34.528222</span><span class="p">]</span> <span class="n">vfio</span><span class="o">-</span><span class="n">pci</span> <span class="mi">0000</span><span class="p">:</span><span class="mi">0</span><span class="n">e</span><span class="p">:</span><span class="mf">00.0</span><span class="p">:</span> <span class="n">vfio_ecap_init</span><span class="p">:</span> <span class="n">hiding</span> <span class="n">ecap</span> <span class="mh">0x28</span><span class="o">@</span><span class="mh">0xe00</span>
<span class="p">[</span>   <span class="mf">34.528223</span><span class="p">]</span> <span class="n">vfio</span><span class="o">-</span><span class="n">pci</span> <span class="mi">0000</span><span class="p">:</span><span class="mi">0</span><span class="n">e</span><span class="p">:</span><span class="mf">00.0</span><span class="p">:</span> <span class="n">vfio_ecap_init</span><span class="p">:</span> <span class="n">hiding</span> <span class="n">ecap</span> <span class="mh">0x26</span><span class="o">@</span><span class="mh">0xf00</span>
<span class="p">[</span>   <span class="mf">34.529465</span><span class="p">]</span> <span class="n">vfio</span><span class="o">-</span><span class="n">pci</span> <span class="mi">0000</span><span class="p">:</span><span class="mi">0</span><span class="n">e</span><span class="p">:</span><span class="mf">00.0</span><span class="p">:</span> <span class="n">No</span> <span class="n">more</span> <span class="n">image</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">PCI</span> <span class="n">ROM</span>
<span class="p">[</span>   <span class="mf">34.548134</span><span class="p">]</span> <span class="n">vfio</span><span class="o">-</span><span class="n">pci</span> <span class="mi">0000</span><span class="p">:</span><span class="mi">0</span><span class="n">e</span><span class="p">:</span><span class="mf">00.1</span><span class="p">:</span> <span class="n">vfio_ecap_init</span><span class="p">:</span> <span class="n">hiding</span> <span class="n">ecap</span> <span class="mh">0x26</span><span class="o">@</span><span class="mh">0x170</span>
<span class="p">[</span>   <span class="mf">36.127601</span><span class="p">]</span> <span class="n">vfio</span><span class="o">-</span><span class="n">pci</span> <span class="mi">0000</span><span class="p">:</span><span class="mi">0</span><span class="n">e</span><span class="p">:</span><span class="mf">00.0</span><span class="p">:</span> <span class="n">No</span> <span class="n">more</span> <span class="n">image</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">PCI</span> <span class="n">ROM</span>
<span class="p">[</span>   <span class="mf">36.127623</span><span class="p">]</span> <span class="n">vfio</span><span class="o">-</span><span class="n">pci</span> <span class="mi">0000</span><span class="p">:</span><span class="mi">0</span><span class="n">e</span><span class="p">:</span><span class="mf">00.0</span><span class="p">:</span> <span class="n">No</span> <span class="n">more</span> <span class="n">image</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">PCI</span> <span class="n">ROM</span>
</pre></div>

    </div>
</div>
</div>

    </details>
</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<div class="highlight"><pre><span></span>cat /proc/cmdline
</pre></div>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<details class="description">
      <summary data-open="Hide Code" data-close="Show Code"></summary>
        <summary></summary>
        <div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">BOOT_IMAGE</span><span class="o">=/</span><span class="n">boot</span><span class="o">/</span><span class="n">vmlinuz</span><span class="o">-</span><span class="mf">5.4</span><span class="o">.</span><span class="mi">73</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="n">pve</span> <span class="n">root</span><span class="o">=/</span><span class="n">dev</span><span class="o">/</span><span class="n">mapper</span><span class="o">/</span><span class="n">pve</span><span class="o">-</span><span class="n">root</span> <span class="n">ro</span> <span class="n">quiet</span> <span class="n">amd_iommu</span><span class="o">=</span><span class="n">on</span> <span class="n">iommu</span><span class="o">=</span><span class="n">pt</span> <span class="n">video</span><span class="o">=</span><span class="n">efifb</span><span class="p">:</span><span class="n">off</span> <span class="n">nofb</span> <span class="n">nomodeset</span> <span class="n">video</span><span class="o">=</span><span class="n">vesafb</span><span class="p">:</span><span class="n">off</span>
</pre></div>

    </div>
</div>
</div>

    </details>
</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="For-each-VM-with-GPU-passthrough-required">For each VM with GPU passthrough required<a class="anchor-link" href="#For-each-VM-with-GPU-passthrough-required"> </a></h3><div class="highlight"><pre><span></span><span class="nv">_DEVICE</span><span class="o">=</span><span class="k">$(</span>lspci <span class="p">|</span> grep VGA <span class="p">|</span> head -c <span class="m">5</span><span class="k">)</span>
<span class="nv">VID</span><span class="o">=</span><span class="m">100</span>  <span class="c1"># your VM ID here</span>

<span class="nb">echo</span> <span class="s2">&quot;machine: q35</span>
<span class="s2">cpu: host,hidden=1,flags=+pcid</span>
<span class="s2">numa: 1</span>
<span class="s2">hostpci0: </span><span class="si">${</span><span class="nv">_DEVICE</span><span class="si">}</span><span class="s2">,pcie=1,x-vga=1</span>
<span class="s2">bios: ovmf</span>
<span class="s2">scsihw: virtio-scsi-pci</span>
<span class="s2">vga: virtio</span>
<span class="s2">args: -cpu &#39;host,+kvm_pv_unhalt,+kvm_pv_eoi,hv_vendor_id=NV43FIX,kvm=off&#39;</span>
<span class="s2">&quot;</span> &gt;&gt; /etc/pve/qemu-server/<span class="nv">$VID</span>.conf
</pre></div>
<p>Now you can start the VM with full GPU passthrough.</p>
<p>If you have multiple devices, you can replace <code>$_DEVICE</code> with the specific device you want to passthrough</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Create-ZFS-Pools">Create ZFS Pools<a class="anchor-link" href="#Create-ZFS-Pools"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Detect-drives">Detect drives<a class="anchor-link" href="#Detect-drives"> </a></h3><div class="highlight"><pre><span></span>fdisk -l <span class="p">|</span> grep <span class="s1">&#39;^Disk&#39;</span>
</pre></div>
<h3 id="Format-drives">Format drives<a class="anchor-link" href="#Format-drives"> </a></h3><p>If creating a fresh pool, delete everything on the drive with <code>d</code></p>
<div class="highlight"><pre><span></span>fdisk /dev/your_drive
</pre></div>
<h3 id="Setup-zpool">Setup zpool<a class="anchor-link" href="#Setup-zpool"> </a></h3><div class="highlight"><pre><span></span>zpool create -m /mnt/target_name target_name raidz_type /dev/drive1 /dev/drive2 <span class="c1"># ...</span>
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Create-Backup-Server">Create Backup Server<a class="anchor-link" href="#Create-Backup-Server"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Install-Proxmox-Backup-Server">Install Proxmox Backup Server<a class="anchor-link" href="#Install-Proxmox-Backup-Server"> </a></h3><ol>
<li>Download and install the <a href="https://www.proxmox.com/en/downloads/category/iso-images-pbs">PBS ISO</a></li>
<li>Install as a VM on current Proxmox Server (if backups are not critical)</li>
<li>Install on a separate machine off-site (if backups are critical)</li>
</ol>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Add-Storage-to-PBS">Add Storage to PBS<a class="anchor-link" href="#Add-Storage-to-PBS"> </a></h3><ol>
<li>In PVE: Add new SCSI device to PBS VM with target disk size (500GB should be enough to get started).  This can come from your ZFS pool.</li>
<li>In PBS: Drives should appear mounted.  Initialize these disks with GPT (Administration &gt; Storage/Disks).  If coming from your ZFS pool in (1), you don't need to create another pool in PBS.</li>
<li>In PVE: Add new PBS storage (Datacenter &gt; Add &gt; Proxmox Backup Server) with the same name as from (2) and enter SHA-256 fingerprint from PBS (Dashboard &gt; Show Fingerprint)</li>
</ol>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Schedule-backups">Schedule backups<a class="anchor-link" href="#Schedule-backups"> </a></h3><ol>
<li>In PVE: Create backup jobs (Datacenter &gt; Backup &gt; Add) with preferred settings.  Defaults are fine.</li>
<li>In PBS: Configure how many backups you want to keep.  Keeping a few dailies, 1 weekly, 1 monthly is fine.  Keep longer for critical applications.</li>
<li>In PBS: Setup verify jobs (Datastore &gt; Verify Jobs).  Defaults are fine.  This will validate your jobs for corruption.</li>
</ol>

</div>
</div>
</div>
</div>
 

