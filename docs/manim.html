---

title: Manim


keywords: fastai
sidebar: home_sidebar

summary: "Recipes for manim"
description: "Recipes for manim"
nb_path: "nbs/03_modeling/manim.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/03_modeling/manim.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">fastcore.basics</span> <span class="kn">import</span> <span class="n">patch</span>
<span class="kn">from</span> <span class="nn">manim</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">manim.mobject.geometry</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">manim.mobject</span> <span class="kn">import</span> <span class="n">geometry</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_text output_error">
<pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">ModuleNotFoundError</span>                       Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-2-6cf3d958112b&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-intense-fg ansi-bold">      1</span> <span class="ansi-green-fg">from</span> fastcore<span class="ansi-blue-fg">.</span>basics <span class="ansi-green-fg">import</span> patch
<span class="ansi-green-fg">----&gt; 2</span><span class="ansi-red-fg"> </span><span class="ansi-green-fg">from</span> manim <span class="ansi-green-fg">import</span> <span class="ansi-blue-fg">*</span>
<span class="ansi-green-intense-fg ansi-bold">      3</span> <span class="ansi-green-fg">import</span> numpy <span class="ansi-green-fg">as</span> np
<span class="ansi-green-intense-fg ansi-bold">      4</span> <span class="ansi-green-fg">from</span> manim<span class="ansi-blue-fg">.</span>mobject<span class="ansi-blue-fg">.</span>geometry <span class="ansi-green-fg">import</span> <span class="ansi-blue-fg">*</span>
<span class="ansi-green-intense-fg ansi-bold">      5</span> <span class="ansi-green-fg">from</span> manim<span class="ansi-blue-fg">.</span>mobject <span class="ansi-green-fg">import</span> geometry

<span class="ansi-red-fg">ModuleNotFoundError</span>: No module named &#39;manim&#39;</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nd">@patch</span>
<span class="k">def</span> <span class="nf">intersect</span><span class="p">(</span><span class="bp">self</span><span class="p">:</span> <span class="n">Circle</span><span class="p">,</span> <span class="n">obj</span><span class="p">:</span> <span class="n">Circle</span><span class="p">,</span> <span class="n">steps</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ArcPolygon</span><span class="p">:</span>
    <span class="n">self_points</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">point_from_proportion</span><span class="p">(</span><span class="n">step</span><span class="p">)</span> <span class="k">for</span> <span class="n">step</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">steps</span><span class="p">)]</span>
    <span class="n">obj_points</span> <span class="o">=</span> <span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">point_from_proportion</span><span class="p">(</span><span class="n">step</span><span class="p">)</span> <span class="k">for</span> <span class="n">step</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">steps</span><span class="p">)]</span>
    
    <span class="n">intersections</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">self_points</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">obj_points</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">a</span><span class="o">-</span><span class="n">b</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">tolerance</span><span class="p">:</span>
                <span class="n">avg</span> <span class="o">=</span> <span class="p">(</span><span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span>
                <span class="n">intersections</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">avg</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="n">ArcPolygon</span><span class="p">(</span><span class="o">*</span><span class="n">intersections</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">fill_opacity</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">PURPLE_A</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_text output_error">
<pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-1-6cec2045a59e&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-fg">----&gt; 1</span><span class="ansi-red-fg"> </span><span class="ansi-green-fg">def</span> intersect<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">:</span> Circle<span class="ansi-blue-fg">,</span> obj<span class="ansi-blue-fg">:</span> Circle<span class="ansi-blue-fg">,</span> steps<span class="ansi-blue-fg">=</span><span class="ansi-cyan-fg">500</span><span class="ansi-blue-fg">,</span> tolerance<span class="ansi-blue-fg">=</span><span class="ansi-cyan-fg">0.01</span><span class="ansi-blue-fg">)</span> <span class="ansi-blue-fg">-&gt;</span> ArcPolygon<span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">      2</span>     self_points <span class="ansi-blue-fg">=</span> <span class="ansi-blue-fg">[</span>self<span class="ansi-blue-fg">.</span>point_from_proportion<span class="ansi-blue-fg">(</span>step<span class="ansi-blue-fg">)</span> <span class="ansi-green-fg">for</span> step <span class="ansi-green-fg">in</span> np<span class="ansi-blue-fg">.</span>linspace<span class="ansi-blue-fg">(</span><span class="ansi-cyan-fg">0</span><span class="ansi-blue-fg">,</span><span class="ansi-cyan-fg">1</span><span class="ansi-blue-fg">,</span>steps<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">]</span>
<span class="ansi-green-intense-fg ansi-bold">      3</span>     obj_points <span class="ansi-blue-fg">=</span> <span class="ansi-blue-fg">[</span>obj<span class="ansi-blue-fg">.</span>point_from_proportion<span class="ansi-blue-fg">(</span>step<span class="ansi-blue-fg">)</span> <span class="ansi-green-fg">for</span> step <span class="ansi-green-fg">in</span> np<span class="ansi-blue-fg">.</span>linspace<span class="ansi-blue-fg">(</span><span class="ansi-cyan-fg">0</span><span class="ansi-blue-fg">,</span><span class="ansi-cyan-fg">1</span><span class="ansi-blue-fg">,</span>steps<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">]</span>
<span class="ansi-green-intense-fg ansi-bold">      4</span> 
<span class="ansi-green-intense-fg ansi-bold">      5</span>     intersections <span class="ansi-blue-fg">=</span> <span class="ansi-blue-fg">[</span><span class="ansi-blue-fg">]</span>

<span class="ansi-red-fg">NameError</span>: name &#39;Circle&#39; is not defined</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%</span><span class="k">manim</span> IntersectionDemo

class IntersectionDemo(Scene):
    def construct(self):
        A = Circle(RED, fill_opacity=0.5, radius=2).shift(LEFT*2)
        B = Circle(BLUE, fill_opacity=0.5).shift(RIGHT*2)
#         intersection = Cutout(A, B)
        self.play(ShowCreation(A), ShowCreation(B))
        self.wait(1)
        
        self.play(A.animate.shift(RIGHT), B.animate.shift(LEFT))
        intersection2 = Cutout(A,B, color=GREEN)
        self.play(ShowCreation(intersection2))
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%</span><span class="k">manim</span> IntersectionDemo

class IntersectionDemo(Scene):
    def construct(self):
        A = Circle(RED, fill_opacity=0.5, radius=2).shift(LEFT*2)
        B = Circle(BLUE, fill_opacity=0.5).shift(RIGHT*2)
        intersection = A.intersect(B)
        self.play(ShowCreation(A), ShowCreation(B), ShowCreation(intersection))
        self.wait(1)
        
        A2 = Circle(RED, fill_opacity=0.5, radius=2).shift(LEFT*0.5)
        B2 = Circle(BLUE, fill_opacity=0.5).shift(RIGHT*0.5)
        intersection2 = A2.intersect(B2)
        self.play(Transform(A,A2), Transform(B,B2), Transform(intersection, intersection2))
        self.wait(1)
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%</span><span class="k">manim</span> IntersectionDemo

class IntersectionDemo(Scene):
    def get_intersections(self, A, B, tolerance=0.01, steps=500):
        A_points = [A.point_from_proportion(step) for step in np.linspace(0,1,steps)]
        B_points = [B.point_from_proportion(step) for step in np.linspace(0,1,steps)]

        intersections = []
        for a in A_points:
            for b in B_points:
                if np.linalg.norm(a-b) &lt; tolerance:
                    avg = (a+b)/2
                    intersections.append(avg)

        return intersections
    
    def intersect(self, A, B):
        intersections = self.get_intersections(A,B)
        return ArcPolygon(*intersections, radius=1, fill_opacity=0.5, color=PURPLE_A)
    
    def construct(self):
        with register_font(&#39;JetBrainsMono-Regular.ttf&#39;):
            text = Text(&#39;Hello World&#39;, font=&#39;JetBrainsMono&#39;).shift(UP*2)
        self.play(Write(text))
        A = Circle(RED, fill_opacity=0.5).shift(LEFT*2)
        B = Circle(BLUE, fill_opacity=0.5).shift(RIGHT*2)
        intersection = self.intersect(A,B)
        self.play(ShowCreation(A), ShowCreation(B), ShowCreation(intersection))
        self.wait(1)
        
        A2 = Circle(RED, fill_opacity=0.5).shift(LEFT*0.5)
        B2 = Circle(BLUE, fill_opacity=0.5).shift(RIGHT*0.5)
        intersection2 = self.intersect(A2,B2)
        self.play(Transform(A,A2), Transform(B,B2), Transform(intersection, intersection2))
        self.wait(1)
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%</span><span class="k">manim</span> IntersectionDemo -qm -v WARNING

class IntersectionDemo(Scene):    
    def construct(self):
        with register_font(&#39;JetBrainsMono-Regular.ttf&#39;):
            text = Text(&#39;Hello World&#39;, font=&#39;JetBrainsMono&#39;).shift(UP*2)
        self.play(Write(text))
        A = Circle(RED, fill_opacity=0.5).shift(LEFT*2)
        B = Circle(BLUE, fill_opacity=0.5).shift(RIGHT*2)
        self.play(ShowCreation(A), ShowCreation(B))
        self.play(A.animate.shift(RIGHT*1.5), B.animate.shift(LEFT*1.5))
        self.wait(1)
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%</span><span class="k">manim</span> IntersectionDemo

class IntersectionDemo(Scene):    
    def construct(self):
        s1 = Square().scale(2.5)
        s2 = Triangle().shift(DOWN + RIGHT).scale(0.5)
        s3 = Square().shift(UP + RIGHT).scale(0.5)
        s4 = RegularPolygon(5).shift(DOWN + LEFT).scale(0.5)
        s5 = RegularPolygon(6).shift(UP + LEFT).scale(0.5)
        c = Cutout(s1, s2, s3, s4, s5, fill_opacity=1, color=BLUE, stroke_color=RED)
        self.play(Write(c), run_time=4)
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%</span><span class="k">manim</span> IntersectionDemo -qm -v WARNING

class IntersectionDemo(Scene):    
    def construct(self):
        s = Vector()
        
        self.play(Write(s))
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%</span><span class="k">manim</span> IntersectionDemo -qm -v WARNING

class IntersectionDemo(Scene):    
    def construct(self):
        s = Vector()
        
        self.play(Write(s))
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

</div>
 

